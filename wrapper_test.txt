Coverage Report by instance with details

=================================================================================
=== Instance: /\wrapper_tb#DUT /spislave/shift_reg
=== Design Unit: work.SIPO
=================================================================================
Branch Coverage:
    Enabled Coverage              Bins      Hits    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Branches                         2         2         0   100.00%

================================Branch Details================================

Branch Coverage for instance /\wrapper_tb#DUT /spislave/shift_reg

    Line         Item                      Count     Source 
    ----         ----                      -----     ------ 
  File sipo.v
------------------------------------IF Branch------------------------------------
    8                                     129950     Count coming in to IF
    8               1                     119966         if(!SS_n) 
                                            9984     All False Count
Branch totals: 2 hits of 2 branches = 100.00%


Statement Coverage:
    Enabled Coverage              Bins      Hits    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Statements                       2         2         0   100.00%

================================Statement Details================================

Statement Coverage for instance /\wrapper_tb#DUT /spislave/shift_reg --

    Line         Item                      Count     Source 
    ----         ----                      -----     ------ 
  File sipo.v
    1                                                module SIPO (clk,SS_n ,MOSI, rx_data); 
    2                                                input  clk, MOSI,SS_n; 
    3                                                output [9:0] rx_data; 
    4                                                reg [9:0] tmp; 
    5                                                 
    6               1                     129950       always @(posedge clk) 
    7                                                  begin
    8                                                    if(!SS_n) 
    9               1                     119966         tmp = {tmp[8:0],MOSI}; 

Toggle Coverage:
    Enabled Coverage              Bins      Hits    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Toggles                         46        46         0   100.00%

================================Toggle Details================================

Toggle Coverage for instance /\wrapper_tb#DUT /spislave/shift_reg --

                                              Node      1H->0L      0L->1H                          "Coverage"
                                              ---------------------------------------------------------------
                                              MOSI           1           1                              100.00 
                                              SS_n           1           1                              100.00 
                                               clk           1           1                              100.00 
                                      rx_data[0-9]           1           1                              100.00 
                                          tmp[9-0]           1           1                              100.00 

Total Node Count     =         23 
Toggled Node Count   =         23 
Untoggled Node Count =          0 

Toggle Coverage      =     100.00% (46 of 46 bins)

=================================================================================
=== Instance: /\wrapper_tb#DUT /spislave/counter
=== Design Unit: work.up_counter
=================================================================================
Branch Coverage:
    Enabled Coverage              Bins      Hits    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Branches                         2         2         0   100.00%

================================Branch Details================================

Branch Coverage for instance /\wrapper_tb#DUT /spislave/counter

    Line         Item                      Count     Source 
    ----         ----                      -----     ------ 
  File counter.v
------------------------------------IF Branch------------------------------------
    6                                     249991     Count coming in to IF
    6               1                      39970     if(~rst_n||counter_up==4'd10)
    8               1                     210021     else
Branch totals: 2 hits of 2 branches = 100.00%


Condition Coverage:
    Enabled Coverage              Bins   Covered    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Conditions                       2         2         0   100.00%

================================Condition Details================================

Condition Coverage for instance /\wrapper_tb#DUT /spislave/counter --

  File counter.v
----------------Focused Condition View-------------------
Line       6 Item    1  (~rst_n || (counter_up == 10))
Condition totals: 2 of 2 input terms covered = 100.00%

          Input Term   Covered  Reason for no coverage   Hint
         -----------  --------  -----------------------  --------------
               rst_n         Y
  (counter_up == 10)         Y

     Rows:       Hits  FEC Target            Non-masking condition(s)      
 ---------  ---------  --------------------  -------------------------     
  Row   1:          1  rst_n_0               -                             
  Row   2:          1  rst_n_1               ~(counter_up == 10)           
  Row   3:          1  (counter_up == 10)_0  rst_n                         
  Row   4:          1  (counter_up == 10)_1  rst_n                         


Statement Coverage:
    Enabled Coverage              Bins      Hits    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Statements                       3         3         0   100.00%

================================Statement Details================================

Statement Coverage for instance /\wrapper_tb#DUT /spislave/counter --

    Line         Item                      Count     Source 
    ----         ----                      -----     ------ 
  File counter.v
    1                                                module up_counter(input clk, rst_n, output[3:0] counter);
    2                                                reg [3:0] counter_up;
    3                                                
    4               1                     249991     always @(posedge clk or negedge rst_n)
    5                                                begin
    6                                                if(~rst_n||counter_up==4'd10)
    7               1                      39970      counter_up <= 4'd0;
    8                                                else
    9               1                     210021      counter_up <= counter_up + 4'd1;

Toggle Coverage:
    Enabled Coverage              Bins      Hits    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Toggles                         20        20         0   100.00%

================================Toggle Details================================

Toggle Coverage for instance /\wrapper_tb#DUT /spislave/counter --

                                              Node      1H->0L      0L->1H                          "Coverage"
                                              ---------------------------------------------------------------
                                               clk           1           1                              100.00 
                                      counter[0-3]           1           1                              100.00 
                                   counter_up[3-0]           1           1                              100.00 
                                             rst_n           1           1                              100.00 

Total Node Count     =         10 
Toggled Node Count   =         10 
Untoggled Node Count =          0 

Toggle Coverage      =     100.00% (20 of 20 bins)

=================================================================================
=== Instance: /\wrapper_tb#DUT /spislave/shift_regII
=== Design Unit: work.PISO
=================================================================================
Branch Coverage:
    Enabled Coverage              Bins      Hits    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Branches                         4         4         0   100.00%

================================Branch Details================================

Branch Coverage for instance /\wrapper_tb#DUT /spislave/shift_regII

    Line         Item                      Count     Source 
    ----         ----                      -----     ------ 
  File piso.v
------------------------------------IF Branch------------------------------------
    11                                    230018     Count coming in to IF
    11              1                      18836     	if (tx_valid) begin
                                          211182     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    12                                     18836     Count coming in to IF
    12              1                       2456     		if (counter==0)
    14              1                      16380     		else begin
Branch totals: 2 hits of 2 branches = 100.00%


Condition Coverage:
    Enabled Coverage              Bins   Covered    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Conditions                       1         1         0   100.00%

================================Condition Details================================

Condition Coverage for instance /\wrapper_tb#DUT /spislave/shift_regII --

  File piso.v
----------------Focused Condition View-------------------
Line       12 Item    1  (counter == 0)
Condition totals: 1 of 1 input term covered = 100.00%

      Input Term   Covered  Reason for no coverage   Hint
     -----------  --------  -----------------------  --------------
  (counter == 0)         Y

     Rows:       Hits  FEC Target            Non-masking condition(s)      
 ---------  ---------  --------------------  -------------------------     
  Row   1:          1  (counter == 0)_0      -                             
  Row   2:          1  (counter == 0)_1      -                             


Statement Coverage:
    Enabled Coverage              Bins      Hits    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Statements                       4         4         0   100.00%

================================Statement Details================================

Statement Coverage for instance /\wrapper_tb#DUT /spislave/shift_regII --

    Line         Item                      Count     Source 
    ----         ----                      -----     ------ 
  File piso.v
    1                                                module PISO(clk,tx_valid,counter,tx_data,dout);
    2                                                
    3                                                output reg dout;
    4                                                input [7:0] tx_data;
    5                                                input clk ;
    6                                                input tx_valid ;
    7                                                input [3:0] counter;
    8                                                reg [7:0]temp;
    9                                                
    10              1                     230018     always @ (posedge clk) begin
    11                                               	if (tx_valid) begin
    12                                               		if (counter==0)
    13              1                       2456     			temp <= tx_data;
    14                                               		else begin
    15              1                      16380     			dout <= temp[7];
    16              1                      16380     			temp <= {temp[6:0],1'b0};

Toggle Coverage:
    Enabled Coverage              Bins      Hits    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Toggles                         46        46         0   100.00%

================================Toggle Details================================

Toggle Coverage for instance /\wrapper_tb#DUT /spislave/shift_regII --

                                              Node      1H->0L      0L->1H                          "Coverage"
                                              ---------------------------------------------------------------
                                               clk           1           1                              100.00 
                                      counter[0-3]           1           1                              100.00 
                                              dout           1           1                              100.00 
                                         temp[7-0]           1           1                              100.00 
                                      tx_data[0-7]           1           1                              100.00 
                                          tx_valid           1           1                              100.00 

Total Node Count     =         23 
Toggled Node Count   =         23 
Untoggled Node Count =          0 

Toggle Coverage      =     100.00% (46 of 46 bins)

=================================================================================
=== Instance: /\wrapper_tb#DUT /spislave
=== Design Unit: work.SPI
=================================================================================
Branch Coverage:
    Enabled Coverage              Bins      Hits    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Branches                        34        34         0   100.00%

================================Branch Details================================

Branch Coverage for instance /\wrapper_tb#DUT /spislave

    Line         Item                      Count     Source 
    ----         ----                      -----     ------ 
  File spi_under_test.sv
------------------------------------IF Branch------------------------------------
    29                                     39990     Count coming in to IF
    29              1                         50      if (~rst_n)
    31              1                      39940      else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------CASE Branch------------------------------------
    36                                     95852     Count coming in to CASE
    37              1                      20074       IDLE:
    42              1                       9986       CHK_CMD:
    54              1                      43601       WRITE:
    61              1                      17241       READ_ADD:
    69              1                       4950     default:   
Branch totals: 5 hits of 5 branches = 100.00%

------------------------------------IF Branch------------------------------------
    38                                     20074     Count coming in to IF
    38              1                      10072        if(SS_n==0)
    40              1                      10002        else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    43                                      9986     Count coming in to IF
    43              1                          1        if(SS_n==1)
    45              1                       6697        else if (SS_n==0&&MOSI==0)
    47              1                       2466        else if (SS_n==0&&MOSI==1&&flag==0) begin
    50              1                        822        else begin
Branch totals: 4 hits of 4 branches = 100.00%

------------------------------------IF Branch------------------------------------
    55                                     43601     Count coming in to IF
    55              1                       6696        if(SS_n==1) begin
    59              1                      36905        else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    62                                     17241     Count coming in to IF
    62              1                       2466        if(SS_n==1) begin
    66              1                      14775        else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    70                                      4950     Count coming in to IF
    70              1                        822       if(SS_n==1)
    72              1                       4128       else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    78                                    240023     Count coming in to IF
    78              1                        402     if(!rst_n)
    84              1                     239621     else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    86                                    239621     Count coming in to IF
    86              1                       9985       if (ns==CHK_CMD) begin//THE CONDITIONING MUST BE ON THE ns not cs
    89              1                     229636     else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    91                                    239621     Count coming in to IF
    91              1                       9988     if(cs==IDLE)
                                          229633     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    93                                    239621     Count coming in to IF
    93              1                     192402     if (((cs==WRITE)||(cs==READ_ADD))&&(!SS_n)) begin 
    100             1                       9162     else if ((cs==WRITE||cs==READ_ADD)&&SS_n==1) begin
    104             1                      17262     else if (cs==READ_DATA&&SS_n==0) begin
    112             1                        822     else if (cs==READ_DATA&&SS_n==1) begin
                                           19973     All False Count
Branch totals: 5 hits of 5 branches = 100.00%

------------------------------------IF Branch------------------------------------
    94                                    192402     Count coming in to IF
    94              1                       9162     if (counter_out == 4'd9 && (g==0)) begin
                                          183240     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    105                                    17262     Count coming in to IF
    105             1                        822     if (counter_out == 4'd9 &&(g==0)) begin
                                           16440     All False Count
Branch totals: 2 hits of 2 branches = 100.00%


Condition Coverage:
    Enabled Coverage              Bins   Covered    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Conditions                      21        16         5    76.19%

================================Condition Details================================

Condition Coverage for instance /\wrapper_tb#DUT /spislave --

  File spi_under_test.sv
----------------Focused Condition View-------------------
Line       45 Item    1  (SS_n ~| MOSI)
Condition totals: 1 of 2 input terms covered = 50.00%

  Input Term   Covered  Reason for no coverage   Hint
 -----------  --------  -----------------------  --------------
        SS_n         N  '_1' not hit             Hit '_1'
        MOSI         Y

     Rows:       Hits  FEC Target            Non-masking condition(s)      
 ---------  ---------  --------------------  -------------------------     
  Row   1:          1  SS_n_0                ~MOSI                         
  Row   2:    ***0***  SS_n_1                ~MOSI                         
  Row   3:          1  MOSI_0                ~SS_n                         
  Row   4:          1  MOSI_1                ~SS_n                         

----------------Focused Condition View-------------------
Line       47 Item    1  ((~SS_n && MOSI) && ~flag)
Condition totals: 1 of 3 input terms covered = 33.33%

  Input Term   Covered  Reason for no coverage   Hint
 -----------  --------  -----------------------  --------------
        SS_n         N  '_1' not hit             Hit '_1'
        MOSI         N  '_0' not hit             Hit '_0'
        flag         Y

     Rows:       Hits  FEC Target            Non-masking condition(s)      
 ---------  ---------  --------------------  -------------------------     
  Row   1:          1  SS_n_0                (~flag && MOSI)               
  Row   2:    ***0***  SS_n_1                -                             
  Row   3:    ***0***  MOSI_0                ~SS_n                         
  Row   4:          1  MOSI_1                (~flag && ~SS_n)              
  Row   5:          1  flag_0                (~SS_n && MOSI)               
  Row   6:          1  flag_1                (~SS_n && MOSI)               

----------------Focused Condition View-------------------
Line       86 Item    1  (ns == CHK_CMD)
Condition totals: 1 of 1 input term covered = 100.00%

       Input Term   Covered  Reason for no coverage   Hint
      -----------  --------  -----------------------  --------------
  (ns == CHK_CMD)         Y

     Rows:       Hits  FEC Target            Non-masking condition(s)      
 ---------  ---------  --------------------  -------------------------     
  Row   1:          1  (ns == CHK_CMD)_0     -                             
  Row   2:          1  (ns == CHK_CMD)_1     -                             

----------------Focused Condition View-------------------
Line       91 Item    1  (cs == IDLE)
Condition totals: 1 of 1 input term covered = 100.00%

    Input Term   Covered  Reason for no coverage   Hint
   -----------  --------  -----------------------  --------------
  (cs == IDLE)         Y

     Rows:       Hits  FEC Target            Non-masking condition(s)      
 ---------  ---------  --------------------  -------------------------     
  Row   1:          1  (cs == IDLE)_0        -                             
  Row   2:          1  (cs == IDLE)_1        -                             

----------------Focused Condition View-------------------
Line       93 Item    1  (((cs == WRITE) || (cs == READ_ADD)) && ~SS_n)
Condition totals: 3 of 3 input terms covered = 100.00%

        Input Term   Covered  Reason for no coverage   Hint
       -----------  --------  -----------------------  --------------
     (cs == WRITE)         Y
  (cs == READ_ADD)         Y
              SS_n         Y

     Rows:       Hits  FEC Target            Non-masking condition(s)      
 ---------  ---------  --------------------  -------------------------     
  Row   1:          1  (cs == WRITE)_0       ~(cs == READ_ADD)             
  Row   2:          1  (cs == WRITE)_1       ~SS_n                         
  Row   3:          1  (cs == READ_ADD)_0    ~(cs == WRITE)                
  Row   4:          1  (cs == READ_ADD)_1    (~SS_n && ~(cs == WRITE))     
  Row   5:          1  SS_n_0                ((cs == WRITE) || (cs == READ_ADD))
  Row   6:          1  SS_n_1                ((cs == WRITE) || (cs == READ_ADD))

----------------Focused Condition View-------------------
Line       94 Item    1  ((counter_out == 9) && ~g)
Condition totals: 2 of 2 input terms covered = 100.00%

          Input Term   Covered  Reason for no coverage   Hint
         -----------  --------  -----------------------  --------------
  (counter_out == 9)         Y
                   g         Y

     Rows:       Hits  FEC Target            Non-masking condition(s)      
 ---------  ---------  --------------------  -------------------------     
  Row   1:          1  (counter_out == 9)_0  -                             
  Row   2:          1  (counter_out == 9)_1  ~g                            
  Row   3:          1  g_0                   (counter_out == 9)            
  Row   4:          1  g_1                   (counter_out == 9)            

----------------Focused Condition View-------------------
Line       100 Item    1  (((cs == WRITE) || (cs == READ_ADD)) && SS_n)
Condition totals: 2 of 3 input terms covered = 66.66%

        Input Term   Covered  Reason for no coverage   Hint
       -----------  --------  -----------------------  --------------
     (cs == WRITE)         Y
  (cs == READ_ADD)         Y
              SS_n         N  '_0' not hit             Hit '_0'

     Rows:       Hits  FEC Target            Non-masking condition(s)      
 ---------  ---------  --------------------  -------------------------     
  Row   1:          1  (cs == WRITE)_0       ~(cs == READ_ADD)             
  Row   2:          1  (cs == WRITE)_1       SS_n                          
  Row   3:          1  (cs == READ_ADD)_0    ~(cs == WRITE)                
  Row   4:          1  (cs == READ_ADD)_1    (SS_n && ~(cs == WRITE))      
  Row   5:    ***0***  SS_n_0                ((cs == WRITE) || (cs == READ_ADD))
  Row   6:          1  SS_n_1                ((cs == WRITE) || (cs == READ_ADD))

----------------Focused Condition View-------------------
Line       104 Item    1  ((cs == READ_DATA) && ~SS_n)
Condition totals: 2 of 2 input terms covered = 100.00%

         Input Term   Covered  Reason for no coverage   Hint
        -----------  --------  -----------------------  --------------
  (cs == READ_DATA)         Y
               SS_n         Y

     Rows:       Hits  FEC Target            Non-masking condition(s)      
 ---------  ---------  --------------------  -------------------------     
  Row   1:          1  (cs == READ_DATA)_0   -                             
  Row   2:          1  (cs == READ_DATA)_1   ~SS_n                         
  Row   3:          1  SS_n_0                (cs == READ_DATA)             
  Row   4:          1  SS_n_1                (cs == READ_DATA)             

----------------Focused Condition View-------------------
Line       105 Item    1  ((counter_out == 9) && ~g)
Condition totals: 2 of 2 input terms covered = 100.00%

          Input Term   Covered  Reason for no coverage   Hint
         -----------  --------  -----------------------  --------------
  (counter_out == 9)         Y
                   g         Y

     Rows:       Hits  FEC Target            Non-masking condition(s)      
 ---------  ---------  --------------------  -------------------------     
  Row   1:          1  (counter_out == 9)_0  -                             
  Row   2:          1  (counter_out == 9)_1  ~g                            
  Row   3:          1  g_0                   (counter_out == 9)            
  Row   4:          1  g_1                   (counter_out == 9)            

----------------Focused Condition View-------------------
Line       112 Item    1  ((cs == READ_DATA) && SS_n)
Condition totals: 1 of 2 input terms covered = 50.00%

         Input Term   Covered  Reason for no coverage   Hint
        -----------  --------  -----------------------  --------------
  (cs == READ_DATA)         Y
               SS_n         N  '_0' not hit             Hit '_0'

     Rows:       Hits  FEC Target            Non-masking condition(s)      
 ---------  ---------  --------------------  -------------------------     
  Row   1:          1  (cs == READ_DATA)_0   -                             
  Row   2:          1  (cs == READ_DATA)_1   SS_n                          
  Row   3:    ***0***  SS_n_0                (cs == READ_DATA)             
  Row   4:          1  SS_n_1                (cs == READ_DATA)             


FSM Coverage:
    Enabled Coverage              Bins      Hits    Misses  Coverage
    ----------------              ----      ----    ------  --------
    FSM States                       5         5         0   100.00%
    FSM Transitions                  8         8         0   100.00%

================================FSM Details================================

FSM Coverage for instance /\wrapper_tb#DUT /spislave --

FSM_ID: cs
    Current State Object : cs
    ----------------------
    State Value MapInfo :
    ---------------------
Line          State Name               Value
----          ----------               -----
  37                IDLE                   0
  42             CHK_CMD                   1
  71           READ_DATA                   4
  61            READ_ADD                   3
  54               WRITE                   2
    Covered States :
    ----------------
                   State           Hit_count
                   -----           ---------
                    IDLE               10037          
                 CHK_CMD                9985          
               READ_DATA                1644          
                READ_ADD                4932          
                   WRITE               13392          
    Covered Transitions :
    ---------------------
Line            Trans_ID           Hit_count          Transition          
----            --------           ---------          ----------          
  39                   0                9985          IDLE -> CHK_CMD               
  51                   1                 822          CHK_CMD -> READ_DATA          
  48                   2                2466          CHK_CMD -> READ_ADD           
  46                   3                6696          CHK_CMD -> WRITE              
  44                   4                   1          CHK_CMD -> IDLE               
  71                   5                 822          READ_DATA -> IDLE             
  63                   6                2466          READ_ADD -> IDLE              
  56                   7                6696          WRITE -> IDLE                 


    Summary                       Bins      Hits    Misses  Coverage
    -------                       ----      ----    ------  --------
        FSM States                   5         5         0   100.00%
        FSM Transitions              8         8         0   100.00%
Statement Coverage:
    Enabled Coverage              Bins      Hits    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Statements                      35        35         0   100.00%

================================Statement Details================================

Statement Coverage for instance /\wrapper_tb#DUT /spislave --

    Line         Item                      Count     Source 
    ----         ----                      -----     ------ 
  File spi_under_test.sv
    2                                                module SPI (MOSI,MISO,SS_n,clk,rst_n,rx_valid,rx_data,tx_valid,tx_data);
    3                                                //defining states
    4                                                /*parameter IDLE=3'b000;
    5                                                parameter CHK_CMD=3'b001;
    6                                                parameter WRITE=3'b010;
    7                                                parameter READ_ADD=3'b011;
    8                                                parameter READ_DATA=3'b100;*/
    9                                                //input output decleration
    10                                               input MOSI,SS_n,clk,rst_n,tx_valid;
    11                                               input [7:0]tx_data;
    12                                               output reg MISO,rx_valid;
    13                                               output reg [9:0]rx_data;
    14                                               reg g;
    15                                               //additional signals needed during operation
    16                                               reg flag,counter_rst_n;
    17                                               state_e cs,ns;
    18                                               wire dout;
    19                                               wire [9:0]din;
    20                                               wire [3:0]counter_out;
    21                                               //SIPO instan.
    22                                               SIPO shift_reg(clk,rx_valid,MOSI,din);
    23                                               //up_counter piso instan.
    24                                               up_counter counter(clk,counter_rst_n,counter_out);
    25                                               //PISO instan.
    26                                               PISO shift_regII(clk,tx_valid,counter_out,tx_data,dout);
    27                                               //state memory
    28              1                      39990     always @(posedge clk or negedge rst_n) begin
    29                                                if (~rst_n)
    30              1                         50        cs <= IDLE;
    31                                                else
    32              1                      39940        cs <= ns;
    33                                               end
    34                                               //next state logic
    35              1                      95852     always @(cs,MOSI,SS_n) begin //bug : MOSI MUST NOT BE in the sensetivity list !!
    36                                               case(cs)
    37                                                 IDLE:
    38                                                  if(SS_n==0)
    39              1                      10072          ns=CHK_CMD;
    40                                                  else
    41              1                      10002          ns=IDLE;
    42                                                 CHK_CMD:
    43                                                  if(SS_n==1)
    44              1                          1          ns=IDLE;
    45                                                  else if (SS_n==0&&MOSI==0)
    46              1                       6697          ns=WRITE;
    47                                                  else if (SS_n==0&&MOSI==1&&flag==0) begin
    48              1                       2466          ns=READ_ADD;
    49                                                  end
    50                                                  else begin
    51              1                        822          ns=READ_DATA;
    52              1                        822          flag=0;
    53                                                  end
    54                                                 WRITE:
    55                                                  if(SS_n==1) begin
    56              1                       6696          ns=IDLE;
    57              1                       6696          flag=0;
    58                                                  end
    59                                                  else
    60              1                      36905          ns=WRITE;
    61                                                 READ_ADD:
    62                                                  if(SS_n==1) begin
    63              1                       2466          ns=IDLE;
    64              1                       2466          flag=1;
    65                                                  end
    66                                                  else
    67              1                      14775          ns=READ_ADD;
    68                                                
    69                                               default:   
    70                                                 if(SS_n==1)
    71              1                        822          ns=IDLE;
    72                                                 else
    73              1                       4128          ns=READ_DATA;
    74                                               endcase
    75                                               end
    76                                               //output logic
    77              1                     240023     always @(posedge clk or negedge rst_n) begin
    78                                               if(!rst_n)
    79                                               begin
    80              1                        402     rx_valid<=0;
    81              1                        402     rx_data<=0;  
    82              1                        402     MISO<=0;// the mOSI MUST RESET TOO !
    83                                               end
    84                                               else
    85                                               begin
    86                                                 if (ns==CHK_CMD) begin//THE CONDITIONING MUST BE ON THE ns not cs
    87              1                       9985     counter_rst_n <= 1'b0;
    88                                               end
    89                                               else
    90              1                     229636     counter_rst_n <= 1'b1;
    91                                               if(cs==IDLE)
    92              1                       9988     g=0;
    93                                               if (((cs==WRITE)||(cs==READ_ADD))&&(!SS_n)) begin 
    94                                               if (counter_out == 4'd9 && (g==0)) begin
    95              1                       9162     rx_valid<=1;
    96              1                       9162     rx_data<=din;
    97              1                       9162     g=1;
    98                                               end
    99                                               end
    100                                              else if ((cs==WRITE||cs==READ_ADD)&&SS_n==1) begin
    101             1                       9162     rx_valid<=0;
    102                                              end
    103                                              
    104                                              else if (cs==READ_DATA&&SS_n==0) begin
    105                                              if (counter_out == 4'd9 &&(g==0)) begin
    106             1                        822     rx_valid<=1;
    107             1                        822     rx_data<=din;
    108             1                        822     g=1;
    109                                              end
    110             1                      17262     MISO <= dout;
    111                                              end
    112                                              else if (cs==READ_DATA&&SS_n==1) begin
    113             1                        822     rx_valid<=0;

Toggle Coverage:
    Enabled Coverage              Bins      Hits    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Toggles                         96        96         0   100.00%

================================Toggle Details================================

Toggle Coverage for instance /\wrapper_tb#DUT /spislave --

                                              Node      1H->0L      0L->1H                          "Coverage"
                                              ---------------------------------------------------------------
                                              MISO           1           1                              100.00 
                                              MOSI           1           1                              100.00 
                                              SS_n           1           1                              100.00 
                                               clk           1           1                              100.00 
                                  counter_out[0-3]           1           1                              100.00 
                                     counter_rst_n           1           1                              100.00 
                                                cs               ENUM type       Value       Count 
                                                                      IDLE           9      100.00 
                                                                   CHK_CMD          10      100.00 
                                                                     WRITE           6      100.00 
                                                                  READ_ADD           3      100.00 
                                                                 READ_DATA           1      100.00 
                                          din[0-9]           1           1                              100.00 
                                              dout           1           1                              100.00 
                                              flag           1           1                              100.00 
                                                 g           1           1                              100.00 
                                                ns               ENUM type       Value       Count 
                                                                      IDLE           9      100.00 
                                                                   CHK_CMD          10      100.00 
                                                                     WRITE           6      100.00 
                                                                  READ_ADD           3      100.00 
                                                                 READ_DATA           1      100.00 
                                             rst_n           1           1                              100.00 
                                      rx_data[9-0]           1           1                              100.00 
                                          rx_valid           1           1                              100.00 
                                      tx_data[0-7]           1           1                              100.00 
                                          tx_valid           1           1                              100.00 

Total Node Count     =         53 
Toggled Node Count   =         53 
Untoggled Node Count =          0 

Toggle Coverage      =     100.00% (96 of 96 bins)

=================================================================================
=== Instance: /\wrapper_tb#DUT 
=== Design Unit: work.spi_wrapper
=================================================================================
Toggle Coverage:
    Enabled Coverage              Bins      Hits    Misses  Coverage
    ----------------              ----      ----    ------  --------
    Toggles                         50        50         0   100.00%

================================Toggle Details================================

Toggle Coverage for instance /\wrapper_tb#DUT  --

                                              Node      1H->0L      0L->1H                          "Coverage"
                                              ---------------------------------------------------------------
                                               clk           1           1                              100.00 
                                              miso           1           1                              100.00 
                                              mosi           1           1                              100.00 
                                             rst_n           1           1                              100.00 
                                      rx_data[0-9]           1           1                              100.00 
                                          rx_valid           1           1                              100.00 
                                              ss_n           1           1                              100.00 
                                      tx_data[0-7]           1           1                              100.00 
                                          tx_valid           1           1                              100.00 

Total Node Count     =         25 
Toggled Node Count   =         25 
Untoggled Node Count =          0 

Toggle Coverage      =     100.00% (50 of 50 bins)


Total Coverage By Instance (filtered view): 96.52%

